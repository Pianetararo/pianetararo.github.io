<!DOCTYPE html><html lang="it"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>#5 - Il Castello di Montebello e la “Dama Bianca” - pianetararo</title><meta name="description" content="'Il mistero non appartiene al passato: è un ponte che il presente tende all’eterno.' Dove si trova 📍 Montebello di Torriana, Val Marecchia (RN) – quota 436 m s.l.m. 🎵 Ascolta i nuovI branI nella Playlist di Frammenti #25 che fanno da colonna sonora all’enigma&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://pianetararo.org/5-il-castello-di-montebello-e-la-dama-bianca/"><link rel="alternate" type="application/atom+xml" href="https://pianetararo.org/feed.xml"><link rel="alternate" type="application/json" href="https://pianetararo.org/feed.json"><meta property="og:title" content="#5 - Il Castello di Montebello e la “Dama Bianca”"><meta property="og:image" content="https://pianetararo.org/media/website/PIANETARARO-1-1-1.svg"><meta property="og:image:width" content="375"><meta property="og:image:height" content="375"><meta property="og:site_name" content="pianetararo"><meta property="og:description" content="'Il mistero non appartiene al passato: è un ponte che il presente tende all’eterno.' Dove si trova 📍 Montebello di Torriana, Val Marecchia (RN) – quota 436 m s.l.m. 🎵 Ascolta i nuovI branI nella Playlist di Frammenti #25 che fanno da colonna sonora all’enigma&hellip;"><meta property="og:url" content="https://pianetararo.org/5-il-castello-di-montebello-e-la-dama-bianca/"><meta property="og:type" content="article"><link rel="stylesheet" href="https://pianetararo.org/assets/css/style.css?v=812e0178178abea4ea9399c6007c2ff4"><link rel="stylesheet" href="https://pianetararo.org/assets/css/photoswipe.css?v=366561c4c503c68e3af3389ac4d7fb8e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://pianetararo.org/5-il-castello-di-montebello-e-la-dama-bianca/"},"headline":"#5 - Il Castello di Montebello e la “Dama Bianca”","datePublished":"2025-04-28T17:02+02:00","dateModified":"2025-05-04T08:30+02:00","image":{"@type":"ImageObject","url":"https://pianetararo.org/media/website/PIANETARARO-1-1-1.svg","height":375,"width":375},"description":"'Il mistero non appartiene al passato: è un ponte che il presente tende all’eterno.' Dove si trova 📍 Montebello di Torriana, Val Marecchia (RN) – quota 436 m s.l.m. 🎵 Ascolta i nuovI branI nella Playlist di Frammenti #25 che fanno da colonna sonora all’enigma&hellip;","author":{"@type":"Person","name":"Pianetararo Associazione Culturale","url":"https://pianetararo.org/authors/pianetararo-associazione-culturale/"},"publisher":{"@type":"Organization","name":"Pianetararo Associazione Culturale","logo":{"@type":"ImageObject","url":"https://pianetararo.org/media/website/PIANETARARO-1-1-1.svg","height":375,"width":375}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="page-template"><header class="top js-header"><a class="logo" href="https://pianetararo.org/"><img src="https://pianetararo.org/media/website/PIANETARARO-1-1-1.svg" alt="pianetararo" width="375" height="375"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://pianetararo.org/test-2/" title="pianetararo" target="_self">Chi siamo</a></li><li class="active-parent has-submenu"><a href="https://pianetararo.org/frammenti25intro/" title="frammenti25" target="_self" aria-haspopup="true">FRAMMENTI#25</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://pianetararo.org/frammenti25/" target="_self">FRAMMENTI DIGITAL - Come funziona ?</a></li><li><a href="https://pianetararo.org/1-il-pozzo-di-san-patrizio/" target="_self">#1 - Gennaio</a></li><li><a href="https://pianetararo.org/2-la-rocca-di-calascio/" target="_self">#2 - Febbraio</a></li><li><a href="https://pianetararo.org/3-il-palio-delle-rane/" target="_self">#3 - Marzo</a></li><li><a href="https://pianetararo.org/4-il-carnevale-di-mamoiada/" target="_self">#4 - Aprile</a></li><li class="active"><a href="https://pianetararo.org/5-il-castello-di-montebello-e-la-dama-bianca/" target="_self">#4 - Maggio</a></li></ul></li><li><a href="https://pianetararo.org/stradora/" title="STRADORA" target="_self">STRADORA</a></li><li><a href="https://pianetararo.org/pensieri/" title="PENSIERI" target="_self">Pensieri</a></li></ul></nav></header><main class="page"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>#5 - Il Castello di Montebello e la “Dama Bianca”</h1></div></header></div><div class="entry-wrapper content__entry"><h5 class="align-center"><span style="color: #169179;">"Il mistero non appartiene al passato: </span><span style="color: #169179;">è un ponte che il presente tende all’eterno."</span></h5><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="2"><figure class="gallery__item"><a href="https://pianetararo.org/media/posts/18/gallery/ingresso_castello.jpg" data-size="1000x666"><img loading="lazy" src="https://pianetararo.org/media/posts/18/gallery/ingresso_castello-thumbnail.jpg" alt="Ingresso del Castello di Montebello" width="720" height="480"></a></figure><figure class="gallery__item"><a href="https://pianetararo.org/media/posts/18/gallery/Montebello-castello.jpg" data-size="360x360"><img loading="lazy" src="https://pianetararo.org/media/posts/18/gallery/Montebello-castello-thumbnail.jpg" alt="Il Castello dall'alto" width="360" height="360"></a></figure></div></div><h4 class="align-center">Dove si trova</h4><p><span style="font-weight: 400;">📍 <a href="https://maps.app.goo.gl/r5uFkKLESwL5LSMw6">Montebello di Torriana, Val Marecchia (RN)</a> – quota </span><strong>436 m s.l.m.</strong></p><p><span style="font-weight: 400;">🎵 Ascolta i nuovI branI nella </span><strong><a href="https://music.youtube.com/playlist?list=PLpJnOIL7Egz8pdyiAaHu3uFmx5Zz5b1cl&amp;si=1oqFiSVkYwQCc26H">Playlist di Frammenti #25</a></strong><span style="font-weight: 400;"> che fanno da colonna sonora all’enigma di Guendalina.</span></p><hr><h4 class="align-center">La leggenda di Azzurrina</h4><table style="border-collapse: collapse; width: 100%; height: 360.8px; border-color: #e67e23; border-style: double;" border="1"><tbody><tr style="height: 48.35px;"><td style="width: 16.4083%; height: 48.35px;">Anno</td><td style="width: 35.3601%; height: 48.35px;">Evento </td><td style="width: 48.2031%; height: 48.35px;">Dettaglio</td></tr><tr><td style="width: 16.4083%;">1370 ca.</td><td style="width: 35.3601%;">Nasce <strong>Guendalina</strong>, figlia albina di Ugolinuccio</td><td style="width: 48.2031%;"><span style="font-weight: 400;">I capelli, tinti con erbe scure, riflettono una strana luce azzurra: da qui il soprannome </span><i><span style="font-weight: 400;">Azzurrina</span></i><span style="font-weight: 400;">.</span></td></tr><tr><td style="width: 16.4083%;">21 giugno 1375</td><td style="width: 35.3601%;"><strong>Scompare </strong>nel sotterraneo durante un temporale</td><td style="width: 48.2031%;"><span style="font-weight: 400;">Due guardie la cercano invano; di lei resta solo l'eco di un grido. </span></td></tr><tr><td style="width: 16.4083%;">1990 - 2020</td><td style="width: 35.3601%;"><strong>Registrazioni audio</strong> ad ogni solstizio quinquennale</td><td style="width: 48.2031%;"><span style="font-weight: 400;">Tecnici captano tuoni, pioggia, un sussurro infantile sempre identico.</span></td></tr></tbody></table><hr><h4 class="align-center">🎧 <a href="https://www.youtube.com/watch?v=pBLrsyFiZZ0">Il Segreto di Azzurrina</a> 🍿 - debunker</h4><p>Secondo la leggenda, il 21 Giugno di ogni anno lustro, giorno del solstizio d’estate, è possibile sentire il pianto della piccola Azzurrina.</p><p>Il 21 Giugno del 1990 una troup televisiva della RAI, girando un documentario all’interno del castello di Montebello, registrò per puro caso una flebile voce. In seguito furono effettuate altre registrazioni e in ogni una di esse quella flebile voce tornò a farsi sentire. </p><p> </p><address class="msg--highlight msg msg--success"><span style="color: #169179;"><strong>E se il segreto fosse… noi?</strong></span><br><br><span style="color: #169179;"><span style="font-weight: 400;">Nel 2025 il castello registra </span><strong>35.000 visitatori/anno</strong><span style="font-weight: 400;">: il racconto di Azzurrina funziona perché intreccia</span></span><br><ul><li style="font-weight: 400;" aria-level="1"><span style="color: #169179;"><span style="font-weight: 400;">terrore ancestrale (sparizione di un bambino),</span><span style="font-weight: 400;"><br></span></span></li><li style="font-weight: 400;" aria-level="1"><span style="color: #169179;"><span style="font-weight: 400;">fascino scientifico (la verifica del sensibile)</span><span style="font-weight: 400;"><br></span></span></li><li style="font-weight: 400;" aria-level="1"><span style="color: #169179;"><span style="font-weight: 400;">e marketing dell’esperienza (turismo emotivo).</span></span></li></ul><br><span style="color: #169179;"><span style="font-weight: 400;">Il “segreto” non sta dunque in un gelo di ghiacciaia, ma nel calore della nostra immaginazione che, da secoli, azzurrina le ombre del corridoio.</span></span></address><hr><h4 class="align-center"><a href="https://www.cicap.org/n/articolo.php?id=275117&amp;utm_source=chatgpt.com">Il CICAP rende pubbliche le registrazioni dei suoni del castello di Azzurrina: nessun fantasma</a></h4><pre><span style="font-weight: 500;">Il </span><strong><a href="https://www.cicap.org/">CICAP </a></strong><br><span style="font-weight: 400;">(</span><i><span style="font-weight: 400;">Comitato Italiano per il Controllo delle Affermazioni sulle Pseudoscienze</span></i><span style="font-weight: 400;">) è un'associazione educativa e scientifica <span style="text-decoration: underline;">fondata nel 1989</span> da <strong>Piero Angela</strong> e da un gruppo di scienziati, studiosi e divulgatori, con l'obiettivo di <strong>promuovere il pensiero critico</strong> e contrastare bufale, superstizioni e pseudoscienze. <br>Attraverso <strong>indagini rigorose</strong>, eventi, pubblicazioni e progetti educativi, il CICAP incoraggia <span style="text-decoration: underline;">l'analisi scientifica</span> di fenomeni apparentemente inspiegabili, dimostrando come spesso questi possano essere chiariti grazie a strumenti razionali e alla verifica empirica. <br><strong>Un punto di riferimento essenziale</strong> per chi desidera capire meglio il confine tra scienza e mistero.</span></pre><hr><h4 class="align-center">Simile nel mondo</h4><p><strong>Castello di Houska</strong><span style="font-weight: 400;"> (Repubblica Ceca) – eretto “al contrario” per sigillare un presunto portale infernale. Le mura interne puntano verso il buco giudicato “ingresso all’oltretomba”.</span></p><h4 class="align-center">Gemelle dell’enigma: White Ladies &amp; Co.</h4><table style="border-collapse: collapse; width: 100%; height: 397.1px;" border="1"><tbody><tr style="height: 48.35px;"><td style="width: 33.3714%; height: 48.35px;"><strong>Luogo</strong></td><td style="width: 33.3714%; height: 48.35px;"><strong>Bambina/Fantasma</strong></td><td style="width: 33.3714%; height: 48.35px;"><strong>Motivo ricorrente</strong></td></tr><tr style="height: 75.35px;"><td style="width: 33.3714%; height: 75.35px;">Houska Castle (CZ)</td><td style="width: 33.3714%; height: 75.35px;">Urla nel "pozzo dell'inferno"</td><td style="width: 33.3714%; height: 75.35px;">"Sigillo" su un varco infernale</td></tr><tr style="height: 75.35px;"><td style="width: 33.3714%; height: 75.35px;">Ballygally Castle (IRL)</td><td style="width: 33.3714%; height: 75.35px;">Lady Isobel Shaw, madre gettata dalla torre</td><td style="width: 33.3714%; height: 75.35px;">Maternità negata <span style="font-weight: 400;">➔ lamento</span></td></tr><tr style="height: 75.35px;"><td style="width: 33.3714%; height: 75.35px;">La Llorona (MEX)</td><td style="width: 33.3714%; height: 75.35px;">Madre che cerca i figli nel fiume</td><td style="width: 33.3714%; height: 75.35px;">Pianto femminile in notti d'acqua</td></tr><tr style="height: 75.35px;"><td style="width: 33.3714%; height: 75.35px;">Okiku (Castello di Himeji - JPN)</td><td style="width: 33.3714%; height: 75.35px;">Serva uccisa; conta piatti dal pozzo</td><td style="width: 33.3714%; height: 75.35px;">Ritornello numerico notturno</td></tr><tr style="height: 47.35px;"><td style="height: 47.35px; width: 100.114%;" colspan="3"><span style="font-weight: 400;">Tutte storie </span><strong>pre‑cinematografiche</strong><span style="font-weight: 400;"> di sparizioni infantili che fungono da monito morale (proteggere la prole, temere l’ignoto) e oggi alimentano un redditizio </span><i><span style="font-weight: 400;">ghost‑tourism</span></i><span style="font-weight: 400;">.</span></td></tr></tbody></table><hr><table style="border-collapse: collapse; width: 100%; border-color: #169179; border-style: solid;" border="1"><tbody><tr><td style="width: 99.886%;"><h4><span style="color: #169179;"><strong>Conclusioni Alternative</strong></span></h4><p>Ecco tre brevi <span style="font-weight: 400;">conclusioni alternative che proseguono la leggenda di Azzurrina in modo misterioso e coinvolgente, ispirate segretamente a tre grandi romanzi. </span></p></td></tr><tr><td style="width: 99.886%;"><strong>LA PORTA NASCOSTA</strong> - <span style="font-weight: 400;">Quando il temporale cessò, Guendalina aprì lentamente gli occhi. Non era più nella ghiacciaia: davanti a lei si apriva una valle luminosa, dove strane creature si aggiravano cantando lievemente sotto un cielo dorato. Una figura gentile le sorrise, offrendole una strana bevanda dolciastra che le fece dimenticare il freddo e la paura. «Vieni», le disse, «il tempo qui scorre diversamente, e ogni tuo desiderio può realizzarsi». Azzurrina non si voltò mai più indietro, perché oltre quella porta nascosta aveva trovato il regno segreto che da sempre la attendeva.</span></td></tr><tr><td style="width: 99.886%;"><strong>IL FILO DEGLI SPECCHI </strong>- <span style="font-weight: 400;">Le guardie non trovarono mai Azzurrina perché lei, scivolando nella ghiacciaia, attraversò uno specchio d’acqua argentata, ritrovandosi in una stanza identica, eppure rovesciata. Qui incontrò un'altra bambina, così simile a lei che sembrava quasi il suo riflesso. Azzurrina capì allora di non essere mai stata sola: oltre ogni specchio viveva una sua copia, che osservava silenziosa la sua vita, condividendone sogni e paure. Quando le due bambine si presero per mano, una voce sussurrò: «Ora siete complete». E tutto si dissolse in una luce azzurrina.</span></td></tr><tr><td style="width: 99.886%;"><strong>LA STANZA DEL TEMPO</strong> - <span style="font-weight: 400;">Quando la porta si richiuse alle sue spalle, Azzurrina si ritrovò nella stessa stanza, ma non nello stesso tempo. Attorno a lei, la ghiacciaia cambiava rapidamente, mostrando epoche passate e future, in una danza di immagini vorticose. Capì allora che poteva fermarsi in qualsiasi epoca desiderasse, purché accettasse di non tornare mai più indietro. Scelse infine un tempo lontano, dove una torre bianca dominava un mare tranquillo. Mentre si affacciava, sentì una voce provenire dal vento: «Benvenuta, ti aspettavamo da tanto». Era giunta finalmente a casa.</span></td></tr><tr><td style="width: 99.886%;"><strong><span style="font-weight: 400;">Hai intuito da quali opere letterarie provengono queste suggestioni narrative? scrivi le tue risposte a  <a href="mailto:info@pianetararo.org">info@pianetararo.org</a></span></strong></td></tr></tbody></table><hr><h4>Sfida creativa "Un brivido in 7 emoji"</h4><ol><li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Immagina di essere una delle guardie del 1375.</span><span style="font-weight: 400;"><br></span></li><li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Racconta in </span><strong>sette emoji</strong><span style="font-weight: 400;"> ciò che hai visto e sentito.</span><span style="font-weight: 400;"><br></span></li><li aria-level="1"><span style="font-weight: 400;">Invia la tua micro‑storia attraverso <strong style="font-family: var(--editor-font-family); font-size: inherit;"><a href="https://forms.gle/NUD1UkXQkvDMtujx9">questo modulo. </a> </strong></span><span style="font-weight: 400;"><br></span></li></ol><p><span style="font-weight: 400;"><span style="font-family: var(--editor-font-family); font-size: inherit;">L</span></span><span style="font-weight: 400;">e più suggestive compariranno a fine mese.</span></p><hr><p class="align-center">Il <strong>Dipinto </strong>che ci ha ispirato questo frammento è <strong><span style="color: #236fa1;">Ophelia </span></strong>di J.E. Millais. </p><figure class="post__video"><iframe loading="lazy" width="560" height="314" src="https://www.youtube-nocookie.com/embed/I2M7U8eCeHA" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></figure><p class="align-center">Esplora il dipinto su <a href="https://artsandculture.google.com/asset/ophelia-sir-john-everett-millais/-wGU6cT4JixtPA?hl=it&amp;ms=%7B%22x%22%3A0.5%2C%22y%22%3A0.5%2C%22z%22%3A9.291831946801867%2C%22size%22%3A%7B%22width%22%3A1.2661614483152996%2C%22height%22%3A1.2375000000000005%7D%7D">Google Arts and Culture</a></p><hr><h4 class="align-center"><strong><a href="https://luoghiinfestati.it/">Luoghi Infestati</a></strong></h4><p> </p><p><span style="font-weight: 400;"><a href="https://luoghiinfestati.it/">luoghiinfestati.it</a> è un sito dedicato alla scoperta e all'approfondimento di luoghi misteriosi, storie paranormali e leggende italiane e internazionali.<br>Attraverso articoli dettagliati, reportage fotografici e audio-video autentici, esplora castelli, ville, boschi e antiche dimore dove il confine tra realtà e leggenda sembra sfumare.<br>Una risorsa intrigante e ben documentata per chi desidera addentrarsi nel fascino oscuro del patrimonio culturale legato a fenomeni inspiegabili e inquietanti.</span></p><hr><p> </p><h4 class="align-center"><a href="https://mysterioustour.it/mistero/azzurrina/">Il tour misterioso al Castello di Montebello</a></h4><p> </p><hr><h4 class="align-center"><strong>Poesia - </strong><span style="color: #236fa1;"><strong><i>Lacrima d’Azzurro</i></strong></span></h4><p class="align-center"><em><span style="font-weight: 400;">Nel corridoio senza luce</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">un rintocco gela il respiro;</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">l’alito antico del tuono</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">tinge le pietre di blu.</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">E tu, bambina di neve,</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">cerchi ancora la porta del cielo,</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">tra gli archi del tempo</span><span style="font-weight: 400;"><br></span><span style="font-weight: 400;">che </span><strong>azzurrinano</strong><span style="font-weight: 400;"> la notte.</span></em></p><h4 class="align-center"><strong>Ti chiediamo…</strong></h4><p class="align-center"><span style="font-weight: 400;">Abbiamo coniato il verbo </span><strong>azzurrinare</strong><span style="font-weight: 400;">. Ora tocca a te: </span><strong>proponi un <a href="https://docs.google.com/forms/d/e/1FAIpQLSe0mx_ikBwEGcbU0uA_0-4HrhHQ6QHgOQJ5RZ45x4VJJOyKdA/viewform?usp=header">aggettivo inesistente</a></strong><span style="font-weight: 400;"> che descriva il Castello dopo il tramonto!</span></p><hr><p><span style="color: #169179;"><i><span style="font-weight: 400;">Simili soli, simili ombre, simili emozioni: ogni frammento è un’eco diversa dello stesso desiderio umano di capire e di stupirsi. Buona esplorazione fra le mura di Montebello!</span></i></span></p><p class="align-center"><a href="https://pianetararo.org/frammenti25/"><em>Torna alla guida </em><svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"></path></svg></a></p></div><footer class="content__footer"><div class="entry-wrapper"><div class="content__actions"><div class="content__share"><button class="btn--icon content__share-button js-content__share-button"><svg width="20" height="20" aria-hidden="true"><use xlink:href="https://pianetararo.org/assets/svg/svg-map.svg#share"></use></svg> <span>Share It</span></button><div class="content__share-popup js-content__share-popup"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpianetararo.org%2F5-il-castello-di-montebello-e-la-dama-bianca%2F" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://pianetararo.org/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fpianetararo.org%2F5-il-castello-di-montebello-e-la-dama-bianca%2F" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://pianetararo.org/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=%235%20-%20Il%20Castello%20di%20Montebello%20e%20la%20%E2%80%9CDama%20Bianca%E2%80%9D https%3A%2F%2Fpianetararo.org%2F5-il-castello-di-montebello-e-la-dama-bianca%2F" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://pianetararo.org/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></div></div></div></footer></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><div class="block-footer-fl" style="width: 100%; height: 100%; , max-width: 100%;"><p class="align-center" style="font-size: x-small;"><span style="color: #44684b;">Pianetararo associazione culturale</span><br><span style="color: #44684b;">CF: 04015870365</span><br><span style="color: #44684b;">info@pianetararo.org</span><br><span style="color: #44684b;">Pianetararo è un associazione senza scopo di lucro e partecipa al programma "Google for Non profits".</span></p><p class="align-center" style="font-size: x-small;"><span style="color: #44684b;"><a href="https://pianetararo.org/privacy-and-cookie/" title="Privacy &amp; Cookie policy" style="color: #44684b;">Privacy &amp; Cookie policy</a></span></p></div></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://pianetararo.org/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://pianetararo.org/assets/js/scripts.min.js?v=700105c316933a8202041b6415abb233"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://pianetararo.org/assets/js/photoswipe.min.js?v=b586a3bc288c989ecce7b81b48e35855"></script><script defer="defer" src="https://pianetararo.org/assets/js/photoswipe-ui-default.min.js?v=9952f77ca2b8fbc9449a268008ea8dee"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
    linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
    if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
    item.el=figureEl;items.push(item);}
    return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
    var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
    if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
    nodeIndex++;}
    if(index>=0){openPhotoSwipe(index,clickedGallery);}
    return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
    var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
    var pair=vars[i].split('=');if(pair.length<2){continue;}
    params[pair[0]]=pair[1];}
    if(params.gid){params.gid=parseInt(params.gid,10);}
    return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
    mainClass:'pswp--light',
    preload: [1,2],
    hideAnimationDuration:200,
    showAnimationDuration:0,
    bgOpacity: 0.7,
    showHideOpacity:true,
    closeOnScroll: true,
    arrowKeys: true,
    closeEl: true,
    captionEl: true,
    fullscreenEl: true,
    zoomEl: true,
    shareEl: true,
    counterEl: true,
    arrowEl: true,
    preloaderEl: true
    };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
    if(isNaN(options.index)){return;}
    if(disableAnimation){options.showAnimationDuration=0;}
    gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
    var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};window.addEventListener('load', function () {initPhotoSwipeFromDOM('.gallery');}, false);</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://pianetararo.org/privacy-and-cookie/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>